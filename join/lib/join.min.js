require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({onm6mO:[function(require,module,exports){var ls=function(a){console.log(util.inspect(a,{depth:null}))};exports.setup=function(opts){var join={opts:opts};join.qs={};var qs=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<qs.length;i++){var q=qs[i].split("=");join.qs[q[0]]=q[1]}join.vars={};join.userapi="http://host.local:1408/genes/user/";join.template=$("<div></div>");join.fill=function(){opts.div.empty().append(join.template.find(".wetjoin_main").clone());console.log(join.qs);if(join.qs.token){join.vars.token=join.qs.token;join.page("token");$(".wetjoin_main .wetjoin_submit").focus().click()}else{join.page("login")}};join.page=function(pagename){join.vars.token=$(".wetjoin_main .wetjoin_token").val()||join.vars.token;join.vars.name=$(".wetjoin_main .wetjoin_name").val()||join.vars.name;join.vars.email=$(".wetjoin_main .wetjoin_email").val()||join.vars.email;join.vars.pass=$(".wetjoin_main .wetjoin_pass").val()||join.vars.pass;$(".wetjoin_main .wetjoin_page").empty().append(join.template.find(".wetjoin_page_"+pagename).clone());$(".wetjoin_main .wetjoin_token").val(join.vars.token);$(".wetjoin_main .wetjoin_name").val(join.vars.name);$(".wetjoin_main .wetjoin_email").val(join.vars.email);$(".wetjoin_main .wetjoin_pass").val(join.vars.pass);join.bind();return false};join.callback=function(cmd,dat){console.log(cmd,dat);if(dat.error){$(".wetjoin_main .wetjoin_error").text(dat.error);return}if(cmd=="join"){join.page("join2")}else if(cmd=="login"){join.page("login2");var q="&S="+dat.session;if(join.qs["continue"]){window.location.href=join.qs["continue"]+q}else{window.location.href="http://forum.wetgenes.com/?"+q}}else if(cmd=="forgot"){join.page("forgot2")}};join.submit=function(cmd){console.log(cmd);$(".wetjoin_main .wetjoin_error").text("");var token=$(".wetjoin_main .wetjoin_token").val();var name=$(".wetjoin_main .wetjoin_name").val();var email=$(".wetjoin_main .wetjoin_email").val();var pass=$(".wetjoin_main .wetjoin_pass").val();if(cmd=="join"){$.post(join.userapi+"create",{name:name,email:email,pass:pass},function(a,b,c){return join.callback("join",a,b,c)},"json");return false}else if(cmd=="login"){$.post(join.userapi+"login",{name:name,email:email,pass:pass},function(a,b,c){return join.callback("login",a,b,c)},"json");return false}else if(cmd=="forgot"){$.post(join.userapi+"update",{name:name,email:email,pass:pass},function(a,b,c){return join.callback("forgot",a,b,c)},"json");return false}else if(cmd=="token"){$.post(join.userapi+"token",{token:token},function(a,b,c){return join.callback("token",a,b,c)},"json");return false}};join.bind=function(){$(".wetjoin_main .wetjoin_header_join").off("click").on("click",function(){return join.page("join")});$(".wetjoin_main .wetjoin_header_login").off("click").on("click",function(){return join.page("login")});$(".wetjoin_main .wetjoin_header_forgot").off("click").on("click",function(){return join.page("forgot")});$(".wetjoin_main .wetjoin_submit_login").off("click").on("click",function(){return join.submit("login")});$(".wetjoin_main .wetjoin_submit_join").off("click").on("click",function(){return join.submit("join")});$(".wetjoin_main .wetjoin_submit_forgot").off("click").on("click",function(){return join.submit("forgot")});$(".wetjoin_main .wetjoin_submit_token").off("click").on("click",function(){return join.submit("token")});$(".wetjoin_main input").off("keypress").on("keypress",function(e){if(e.which==13){$(this).blur();$(".wetjoin_main .wetjoin_submit").focus().click();return false}})};join.template.load("template.html",join.fill);return join}},{}],"./js/join.js":[function(require,module,exports){module.exports=require("onm6mO")},{}]},{},[]);